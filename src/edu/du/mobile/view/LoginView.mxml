<?xml version="1.0"?>
<!--
  Created by jun on 9/14/14.
-->
<s:View xmlns:fx="http://ns.adobe.com/mxml/2009"
        xmlns:s="library://ns.adobe.com/flex/spark" xmlns:popups="edu.du.mobile.view.popups.*">
    <fx:Script>
        <![CDATA[
        import mx.managers.PopUpManager;

        private function _onLoginClick( event:Event ):void
        {

            trace( 'Validate required fields' );


            username_ti.styleName = '';

            password_ti.styleName = '';



            trace( 'User Name: ' + username_ti.text );

            trace( 'password ' + password_ti.text );


            if (username_ti.text=="student" && password_ti.text=="password")
            {
                trace( 'Valid Fields' );
                LoginPopup.open( this, true );
                PopUpManager.centerPopUp( LoginPopup );



            }
            else
            {
                trace( 'Not Valid Fields' );

                // Highlight fields not valid
                if( !( username_ti.text.length))username_ti.errorString='invalid';

                if( !( password_ti.text.length))password_ti.errorString='invalid';


                {
                    trace( 'check the required fields' );
                    LoginfailPopup.open( this, true );
                    PopUpManager.centerPopUp( LoginfailPopup );


                }



            }

        }
        ]]>
    </fx:Script>



    <!-- TODO: Make this view work similar to the RegisterView:
            1. When the submit button is clicked make sure username and password are filled out
            2. If the fields are filled out make sure username is "student" and password is "password"
            3. Make sure "password" is all lower case.
            4. If 1,2,3 and all confirmed, show a success alert. Otherwise show a failed alert
                    with a message that says why it failed. -->



    <s:layout>
        <s:VerticalLayout paddingTop="20" paddingLeft="20" paddingRight="20"
            clipAndEnableScrolling="true"/>
    </s:layout>
    <fx:Declarations>

        <popups:Newpopup id="LoginPopup"/>
        <popups:New2Popup id="LoginfailPopup"/>
    </fx:Declarations>


    <s:Label text="Please Login"
             fontSize="42"
             paddingLeft="100"
             paddingBottom="20"/>

    <s:Label text="Username or email"/>
    <s:TextInput id="username_ti"/>

    <s:Label text="password"
             paddingTop="20"/>
    <s:TextInput id="password_ti"
                 displayAsPassword="true"/>

    <s:Button id="submit_btn"
              label="Login"
              click="_onLoginClick(event)"
              left="150"/>

</s:View>
