<?xml version="1.0"?>
<!--
  Created by jun on 9/14/14.
-->
<s:View xmlns:fx="http://ns.adobe.com/mxml/2009"
        xmlns:s="library://ns.adobe.com/flex/spark"
        xmlns:popups="edu.du.mobile.view.popups.*"
        creationComplete="initApp();">

<fx:Script>
<![CDATA[
    import mx.managers.PopUpManager;

    private function initApp():void {
        submit_btn.addEventListener(MouseEvent.CLICK, loginClick);
    }

    private function loginClick(e:Event):void {
        var usernameCheck:String = 'student';
        var passwordCheck:String = 'password';
        var usernameInput:String = username_ti.text;
        var passwordInput:String = password_ti.text;
        var err:String = '';

        if (usernameInput == usernameCheck && passwordInput == passwordCheck) {
            PopupMessage.title = 'Success.';
            PopupMessage.message = 'Your login succeeded.';
            PopupMessage.open(this, true);
            PopUpManager.centerPopUp(PopupMessage);
        } else {
            if (usernameInput != usernameCheck) {
                if (usernameInput == '') {
                    err += 'Error: Empty username\n';
                } else {
                    err += "Error: Incorrect username\n";
                }
            }

            if (passwordInput != passwordCheck) {
                if (passwordInput == '') {
                    err += 'Error: Password is empty\n';
                } else {
                    err += 'Error: Incorrect password\n';
                }
            }

            if (err.length > 0) {
                PopupMessage.title = 'Your Login failed.\n';
                PopupMessage.message = err;
                PopupMessage.open(this, true);
                PopUpManager.centerPopUp(PopupMessage)
            }
        }
    }
    ]]>
    </fx:Script>

        <fx:Declarations>
        <popups:HelloWorldAppPopup id="PopupMessage"/>
        </fx:Declarations>

    <s:layout>
        <s:VerticalLayout paddingTop="20" paddingLeft="20" paddingRight="20"
            clipAndEnableScrolling="true"/>
    </s:layout>


    <s:Label text="Please Login"
             fontSize="42"
             paddingLeft="100"
             paddingBottom="20"/>

    <s:Label text="Username or email"/>
    <s:TextInput id="username_ti"/>

    <s:Label text="password"
             paddingTop="20"/>
    <s:TextInput id="password_ti"
                 displayAsPassword="true"/>

    <s:Button id="submit_btn"
              label="Login"
              left="150"/>

</s:View>
