<?xml version="1.0"?>
<!--
  Created by jun on 9/14/14.
-->
<s:View xmlns:fx="http://ns.adobe.com/mxml/2009"
        xmlns:s="library://ns.adobe.com/flex/spark" xmlns:popups="edu.du.mobile.view.popups.*">

    <!-- TODO: Make this view work similar to the RegisterView:
            1. When the submit button is clicked make sure username and password are filled out
            2. If the fields are filled out make sure username is "student" and password is "password"
            3. Make sure "password" is all lower case.
            4. If 1,2,3 and all confirmed, show a success alert. Otherwise show a failed alert
                    with a message that says why it failed. -->

    <fx:Script>
    <![CDATA[
            import mx.managers.PopUpManager;

            private function _onSubmitClick( event:Event ):void
            {
               if(username_ti.text == "" && password_ti.text == "")
               {
                   loginPopup.open(this, true);
                   loginPopup.title = "Login Fail";
                   loginPopup.message = "Please enter your username and password.";
                   PopUpManager.centerPopUp(loginPopup);
               }
               else if (username_ti.text.toLowerCase() != "student" //user name not case sensitive
                       || password_ti.text != "password") //password is case sensitive
               {
                   loginPopup.open(this, true);
                   loginPopup.title = "Invalid Credentials";
                   loginPopup.message = "Invalid username or password. Please try again.";
                   PopUpManager.centerPopUp(loginPopup);
               }
               else
               {
                   loginPopup.open(this, true);
                   loginPopup.title = "Login Success";
                   loginPopup.message = "You are now logged in.";
                   PopUpManager.centerPopUp(loginPopup);
               }

            }
        ]]>

    </fx:Script>

    <fx:Declarations>
        <popups:HelloWorldAppPopup id="loginPopup"/>
    </fx:Declarations>

    <s:layout>
        <s:VerticalLayout paddingTop="20" paddingLeft="20" paddingRight="20"
            clipAndEnableScrolling="true"/>
    </s:layout>


    <s:Label text="Please Login"
             fontSize="42"
             paddingLeft="100"
             paddingBottom="20"/>

    <s:Label text="Username or email"/>
    <s:TextInput id="username_ti"/>

    <s:Label text="password"
             paddingTop="20"/>
    <s:TextInput id="password_ti"
                 displayAsPassword="true"/>

    <s:Button id="submit_btn"
              label="Login"
              left="150"
              click="_onSubmitClick(event)"/>

</s:View>
